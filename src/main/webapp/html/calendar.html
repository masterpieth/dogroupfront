<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="../lib/fullcalendar/dist/index.global.js"></script>
        <script src="../js/basic.js"></script>
        <script src="../js/study_detail.js"></script>
        <script>
            //--FullCalender Start--
            $(function(){
                var calendarEl = document.getElementById('calendar');
                let eventArr = new Array()
                let colorArr = ['#E57373', '#FFAB91', '#FFF59D', '#A5D6A7', '#81D4FA', '#9FA8DA', '#B39DDB','#BDBDBD','#D7CCC8','#80DEEA']
                $(studyUserList).each(function(index, user) {
                    let homeworkList = user.homeworkList
                    $(homeworkList).each(function(index2, homework) {
                        let obj = {}
                        obj['title'] = homework.email
                        obj['start'] = homework.studySubmitDt
                        obj['color'] = colorArr[index]
                        eventArr.push(obj)
                    })
                })
                let today = new Date()
                let initialDateStr = today.getFullYear() + '-' + (today.getMonth() + 1) + '-01'
                var calendar = new FullCalendar.Calendar(calendarEl, {
                headerToolbar: {
                    right: 'dayGridMonth',
                    right: 'prev,next today',
                //달력 헤더 설정 
                }, 
                titleFormat : function(date) {
                return date.date.year + '년 ' + (parseInt(date.date.month) + 1) + '월';
                //달력 타이틀 설정
                },
                initialDate: initialDateStr,
                events:  eventArr, 
                //이벤트 설정 
                })
                calendar.render();
                //달력 랜더링
            })
        //--FullCalender END--
        </script>
    </head>
    <body>
        <div id='calendar' style="width: 100%;"></div>
    </body>
</html>